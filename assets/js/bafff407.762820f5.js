"use strict";(self.webpackChunkembedding_sdk_docs=self.webpackChunkembedding_sdk_docs||[]).push([[7767],{5138:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var r=n(5893),i=n(1151);const s={title:"MstrBot class",description:"MstrBot class"},d=void 0,a={id:"native-embedding-architecture/mstr-bot",title:"MstrBot class",description:"MstrBot class",source:"@site/docs/native-embedding-architecture/mstr-bot.md",sourceDirName:"native-embedding-architecture",slug:"/native-embedding-architecture/mstr-bot",permalink:"/embedding-sdk-docs/native-embedding-architecture/mstr-bot",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/native-embedding-architecture/mstr-bot.md",tags:[],version:"current",lastUpdatedBy:"Aran0011",lastUpdatedAt:1710401361,formattedLastUpdatedAt:"Mar 14, 2024",frontMatter:{title:"MstrBot class",description:"MstrBot class"},sidebar:"tutorialSidebar",previous:{title:"MstrDossier class",permalink:"/embedding-sdk-docs/native-embedding-architecture/mstr-dossier"},next:{title:"MstrBotVisualization class",permalink:"/embedding-sdk-docs/native-embedding-architecture/mstr-bot-visualization"}},o={},c=[{value:"APIs",id:"apis",level:2},{value:"The Get Questions API",id:"the-get-questions-api",level:3},{value:"Function",id:"function",level:4},{value:"Input Parameters",id:"input-parameters",level:4},{value:"Response",id:"response",level:4},{value:"Example",id:"example",level:4},{value:"API Errors",id:"api-errors",level:4},{value:"The Render Visualization API",id:"the-render-visualization-api",level:3},{value:"Function",id:"function-1",level:4},{value:"Input Parameters",id:"input-parameters-1",level:4},{value:"Response",id:"response-1",level:4},{value:"Example",id:"example-1",level:4},{value:"API Errors",id:"api-errors-1",level:4},{value:"The Destroy API",id:"the-destroy-api",level:3},{value:"Function",id:"function-2",level:4},{value:"Input Parameters",id:"input-parameters-2",level:4},{value:"Response",id:"response-2",level:4},{value:"Example",id:"example-2",level:4},{value:"API Errors",id:"api-errors-2",level:4}];function l(e){const t={code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components},{Available:n,Details:s}=t;return n||u("Available",!0),s||u("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{since:"2024 Update 3"}),"\n",(0,r.jsxs)(t.p,{children:["The object returned from the ",(0,r.jsx)(t.code,{children:"MstrEnvironment.loadBot()"})," function, which allows access to the MicroStrategy bot object."]}),"\n",(0,r.jsx)(t.h2,{id:"apis",children:"APIs"}),"\n",(0,r.jsx)(t.h3,{id:"the-get-questions-api",children:"The Get Questions API"}),"\n",(0,r.jsx)(t.h4,{id:"function",children:"Function"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"async getQuestions()"})}),"\n",(0,r.jsx)(t.h4,{id:"input-parameters",children:"Input Parameters"}),"\n",(0,r.jsx)(t.p,{children:"N/A"}),"\n",(0,r.jsx)(t.h4,{id:"response",children:"Response"}),"\n",(0,r.jsxs)(t.p,{children:["This API returns a promise object that resolves to the result of GET ",(0,r.jsx)(t.code,{children:"/api/bots/{botId}/questions"})," API. A data sample is like this:"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Example of the questions in the resolved value:"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "questions": [\n    {\n      "id": "D0AEE8DB0BE7471E8CA3FCAF412DB096",\n      "text": "List all orders from the call center",\n      "answers": [\n        {\n          "text": "The customer with the highest revenue is Simonetti with a total revenue of $11,619.",\n          "type": "markdown"\n        }\n      ],\n      "creationDate": "2024-01-05T06:36:36.755+0000"\n    },\n    {\n      "id": "D0AEE8DB0BE7471E8CA3FCAF412DB097",\n      "text": "List all orders from the call center",\n      "answers": [\n        {\n          "text": "The customer with the highest revenue is Simonetti with a total revenue of $11,619.",\n          "type": "visualization",\n          "data": {\n            "id": "A9D9247C28FB4708B8F8E4D81D192ED8"\n          }\n        }\n      ],\n      "creationDate": "2024-01-05T06:36:36.755+0000"\n    }\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(t.h4,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:'try {\n  const environment = await microstrategy.embeddingComponent.environments.create({\n    serverUrl: "https://demo.microstrategy.com/MicroStrategyLibrary",\n    getAuthToken: () => {\n      // Logic similar to the existing Native Embedding SDK.\n    },\n  });\n  // Begin here\n  const bot = await environment.loadBot({\n    projectId: "B19DEDCC11D4E0EFC000EB9495D0F44F",\n    objectId: "E9AB379D11EC92C1D9DC0080EFD415BB",\n  });\n  const questions = await bot.getQuestions();\n} catch (error) {\n  // Your own error handling logic\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"api-errors",children:"API Errors"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Error Case"}),(0,r.jsx)(t.th,{children:"Error Category"}),(0,r.jsx)(t.th,{children:"Handling Module"}),(0,r.jsx)(t.th,{children:"Error Handling"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"REST API errors"}),(0,r.jsx)(t.td,{children:"Other"}),(0,r.jsx)(t.td,{children:"Native Embedding SDK"}),(0,r.jsxs)(t.td,{children:["Caught by the ",(0,r.jsx)(t.code,{children:"catch()"})," of the promise object"]})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"the-render-visualization-api",children:"The Render Visualization API"}),"\n",(0,r.jsx)(t.h4,{id:"function-1",children:"Function"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"async renderVisualization(dataId, container)"})}),"\n",(0,r.jsx)(t.h4,{id:"input-parameters-1",children:"Input Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Data Type"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Is Required"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"dataId"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["The data cache id. Could be got from ",(0,r.jsx)(t.code,{children:"getQuestions()"})," API."]}),(0,r.jsx)(t.td,{children:"true"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"container"}),(0,r.jsx)(t.td,{children:"HTMLElement"}),(0,r.jsxs)(t.td,{children:["The HTML element used for displaying the visualization. The HTML element must be in the current DOM tree of the client\u2019s page. All elements must exist and cannot be in iframes. The ",(0,r.jsx)(t.code,{children:"Node.contains()"})," function is used to determine this and is compatible with all browsers."]}),(0,r.jsx)(t.td,{children:"true"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"response-1",children:"Response"}),"\n",(0,r.jsx)(t.p,{children:"This API returns a promise object that resolves to nothing."}),"\n",(0,r.jsx)(t.h4,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:'try {\n  const environment = await microstrategy.embeddingComponent.environments.create({\n    serverUrl: "https://demo.microstrategy.com/MicroStrategyLibrary",\n    getAuthToken: () => {\n      // Logic similar to the existing Native Embedding SDK.\n    },\n  });\n  // Begin here\n  const bot = await environment.loadBot({\n    projectId: "B19DEDCC11D4E0EFC000EB9495D0F44F",\n    objectId: "E9AB379D11EC92C1D9DC0080EFD415BB",\n  });\n  // Get data id from the result of this API\n  const questions = await bot.getQuestions();\n  const botViz = await bot.renderVisualization(dataId, document.getElementById("container"));\n} catch (error) {\n  // Your own error handling logic\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"api-errors-1",children:"API Errors"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Error Case"}),(0,r.jsx)(t.th,{children:"Error Category"}),(0,r.jsx)(t.th,{children:"Handling Module"}),(0,r.jsx)(t.th,{children:"Error Handling"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"The input parameter fails input validation"}),(0,r.jsx)(t.td,{children:"Invalid input"}),(0,r.jsx)(t.td,{children:"Native Embedding SDK"}),(0,r.jsxs)(t.td,{children:["Caught by the ",(0,r.jsx)(t.code,{children:"catch()"})," of the promise object"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"data id isn't a valid data cache id"}),(0,r.jsx)(t.td,{children:"Invalid input"}),(0,r.jsx)(t.td,{children:"Native Embedding SDK"}),(0,r.jsxs)(t.td,{children:["Caught by the ",(0,r.jsx)(t.code,{children:"catch()"})," of the promise object"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"The container isn\u2019t a valid HTML element in the DOM tree"}),(0,r.jsx)(t.td,{children:"Invalid input"}),(0,r.jsx)(t.td,{children:"Native Embedding SDK"}),(0,r.jsxs)(t.td,{children:["Caught by the ",(0,r.jsx)(t.code,{children:"catch()"})," of the promise object"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"A container has children"}),(0,r.jsx)(t.td,{children:"Invalid input"}),(0,r.jsx)(t.td,{children:"Native Embedding SDK"}),(0,r.jsxs)(t.td,{children:["Caught by the ",(0,r.jsx)(t.code,{children:"catch()"})," of the promise object"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Other REST API errors"}),(0,r.jsx)(t.td,{children:"Other"}),(0,r.jsx)(t.td,{children:"Native Embedding SDK"}),(0,r.jsxs)(t.td,{children:["Caught by the ",(0,r.jsx)(t.code,{children:"catch()"})," of the promise object"]})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"the-destroy-api",children:"The Destroy API"}),"\n",(0,r.jsx)(t.h4,{id:"function-2",children:"Function"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"async destroy()"})}),"\n",(0,r.jsx)(t.h4,{id:"input-parameters-2",children:"Input Parameters"}),"\n",(0,r.jsx)(t.p,{children:"N/A"}),"\n",(0,r.jsx)(t.h4,{id:"response-2",children:"Response"}),"\n",(0,r.jsx)(t.p,{children:"This API returns a promise object that resolves to nothing."}),"\n",(0,r.jsx)(t.h4,{id:"example-2",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"try {\n  // Create bot object from the MstrEnvironment.loadBot() API\n  await bot.destry();\n} catch (error) {\n  // Add your own handling logic here\n}\n"})}),"\n",(0,r.jsx)(t.h4,{id:"api-errors-2",children:"API Errors"}),"\n",(0,r.jsx)(t.p,{children:"N/A |"})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}function u(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>d});var r=n(7294);const i={},s=r.createContext(i);function d(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);