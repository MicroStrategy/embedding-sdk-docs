"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2],{3905:function(e,r,t){t.d(r,{Zo:function(){return u},kt:function(){return h}});var n=t(7294);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=n.createContext({}),d=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},u=function(e){var r=d(e.components);return n.createElement(s.Provider,{value:r},e.children)},c={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},p=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(t),h=o,m=p["".concat(s,".").concat(h)]||p[h]||c[h]||a;return t?n.createElement(m,i(i({ref:r},u),{},{components:t})):n.createElement(m,i({ref:r},u))}));function h(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=p;var l={};for(var s in r)hasOwnProperty.call(r,s)&&(l[s]=r[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var d=2;d<a;d++)i[d]=t[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2443:function(e,r,t){t.r(r),t.d(r,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var n=t(3117),o=t(102),a=(t(7294),t(3905)),i=["components"],l={title:"Error handling",description:"MicroStrategy provides custom error handling in two stages, during dossier creation and after dossier creation."},s=void 0,d={unversionedId:"add-functionality/error-handling",id:"add-functionality/error-handling",title:"Error handling",description:"MicroStrategy provides custom error handling in two stages, during dossier creation and after dossier creation.",source:"@site/docs/add-functionality/error-handling.md",sourceDirName:"add-functionality",slug:"/add-functionality/error-handling",permalink:"/embedding-sdk-docs/add-functionality/error-handling",draft:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/add-functionality/error-handling.md",tags:[],version:"current",lastUpdatedBy:"magua-io",lastUpdatedAt:1665688641,formattedLastUpdatedAt:"Oct 13, 2022",frontMatter:{title:"Error handling",description:"MicroStrategy provides custom error handling in two stages, during dossier creation and after dossier creation."},sidebar:"tutorialSidebar",previous:{title:"Retrieve and apply filters",permalink:"/embedding-sdk-docs/add-functionality/filters"},next:{title:"Interact with panel stacks",permalink:"/embedding-sdk-docs/add-functionality/panel-stacks"}},u={},c=[{value:"Custom error handling",id:"custom-error-handling",level:2},{value:"Custom error handling during dossier creation",id:"custom-error-handling-during-dossier-creation",level:3},{value:"Custom error handling after dossier creation",id:"custom-error-handling-after-dossier-creation",level:3},{value:"The overall MicroStrategy Library error behavior in embed case",id:"the-overall-microstrategy-library-error-behavior-in-embed-case",level:3},{value:"Session error handling",id:"session-error-handling",level:2},{value:"Session error handling during dossier creation",id:"session-error-handling-during-dossier-creation",level:3},{value:"Session error handling after dossier creation",id:"session-error-handling-after-dossier-creation",level:3}],p={toc:c};function h(e){var r=e.components,l=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},p,l,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"By default, Library displays a pop-up dialog when an error occurs, such as when a dataset is not found."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"library server error",src:t(3773).Z,width:"421",height:"328"})),(0,a.kt)("p",null,"MicroStrategy provides custom error handling for these kinds of pop-up errors in two stages."),(0,a.kt)("p",null,"MicroStrategy also provides session error handling for session errors in two stages. Because the handling method of the session error is different from other errors, we don't use the custom error handling in this case."),(0,a.kt)("h2",{id:"custom-error-handling"},"Custom error handling"),(0,a.kt)("h3",{id:"custom-error-handling-during-dossier-creation"},"Custom error handling during dossier creation"),(0,a.kt)("p",null,"The error handler used during dossier creation in\xa0microstrategy.dossier.create\xa0is implemented by default. The error handler is executed when the error occurs and you can get details of the error in the\xa0customErrorHandler\xa0parameter."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"microstrategy.dossier.create({\n  url: url,\n  placeholder: container,\n  errorHandler: customErrorHandler,\n});\n")),(0,a.kt)("p",null,"To disable the custom error handler during dossier creation, set\xa0disableCustomErrorHandlerOnCreate\xa0to\xa0true. The default setting is\xa0false."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"microstrategy.dossier.create({\n  url: url,\n  placeholder: container,\n  disableCustomErrorHandlerOnCreate: true,\n});\n")),(0,a.kt)("h3",{id:"custom-error-handling-after-dossier-creation"},"Custom error handling after dossier creation"),(0,a.kt)("p",null,"You can also provide error handling after the dossier is created. The error handler is executed when the error occurs and you can get details of the error in the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"customErrorHandler"),"\xa0parameter."),(0,a.kt)("p",null,"If you do not configure this error handler and an error is encountered, the default pop-up mentioned at the beginning of this topic appears."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Class"),(0,a.kt)("th",{parentName:"tr",align:null},"Method"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"dossier"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"addCustomErrorHandler(customErrorHandler, showErrorPopup)")),(0,a.kt)("td",{parentName:"tr",align:null},"customErrorHandler(error): The custom error handler that executes when the error occurs. It contains one parameter, error. The error object includes ",(0,a.kt)("inlineCode",{parentName:"td"},"title"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"message"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"desc"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"errorCode"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"iServerErrorCode"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"statusCode"),", and ",(0,a.kt)("inlineCode",{parentName:"td"},"ticketId"),". ",(0,a.kt)("br",null),(0,a.kt)("br",null),"showErrorPopup: Set to ",(0,a.kt)("inlineCode",{parentName:"td"},"false")," to disable the error pop-up and execute the custom error handler you provide. ",(0,a.kt)("br",null),(0,a.kt)("br",null),"set to ",(0,a.kt)("inlineCode",{parentName:"td"},"true")," to display the error pop-up. When the user clicks OK, instead of going to Library, execute the custom error handler.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"removeCustomErrorHandler()")),(0,a.kt)("td",{parentName:"tr",align:null},"Removes the custom error handler and uses the default error pop-up.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null})))),(0,a.kt)("p",null,"Here is an example of how to set up error handling:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'microstrategy.dossier\n  .create({\n    placeholder: placeholderDiv,\n    url: "http://[host]:[port]/[Library]/app/[ProjectID]/[DossierID]",\n    errorHandler: function (error) {\n      console.log("catch error during creation: " + error.message);\n      //Do something to handle the error\n    },\n  })\n  .then(function (dossier) {\n    dossier.addCustomErrorHandler(function (error) {\n      console.log("catch error: " + error.message);\n      //Do something to handle the error\n    });\n  });\n')),(0,a.kt)("h3",{id:"the-overall-microstrategy-library-error-behavior-in-embed-case"},"The overall MicroStrategy Library error behavior in embed case"),(0,a.kt)("p",null,"The error generated by the embedded Library or dossier page would output an error log in the browser console. Besides that,"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If ",(0,a.kt)("inlineCode",{parentName:"li"},"disableCustomErrorHandlerOnCreate")," is set to ",(0,a.kt)("inlineCode",{parentName:"li"},"true")," in ",(0,a.kt)("inlineCode",{parentName:"li"},"microstrategy.dossier.create")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"microstrategy.embeddingContexts.embedLibraryPage"),", the custom error handler couldn't be registered. The error would only be shown by a popup error dialog, which is the same as the OOTB MicroStrategy Library behavior;"),(0,a.kt)("li",{parentName:"ul"},"If ",(0,a.kt)("inlineCode",{parentName:"li"},"disableCustomErrorHandlerOnCreate")," is not set or is ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),":",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"If a custom error handler is set by ",(0,a.kt)("inlineCode",{parentName:"li"},"errorHandler")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"addCustomErrorHandler(customErrorHandler, false)"),", the error would only invoke the custom error handler and wouldn't popup a Library error dialog."),(0,a.kt)("li",{parentName:"ul"},"If a custom error handler is set by ",(0,a.kt)("inlineCode",{parentName:"li"},"addCustomErrorHandler(customErrorHandler, true)"),", the error would first popup an error dialog, and when the user clicks the button on the error dialog, the custom error handler would be invoked."),(0,a.kt)("li",{parentName:"ul"},"If no custom error handler is set, the error would not popup an error dialog. There is no additional effect except the error log in the console.")))),(0,a.kt)("h2",{id:"session-error-handling"},"Session error handling"),(0,a.kt)("p",null,"When the session expiration error occurs:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If there is no ",(0,a.kt)("inlineCode",{parentName:"li"},"sessionErrorHandler")," defined, the page will show the Library's logout page."),(0,a.kt)("li",{parentName:"ul"},"If you define a ",(0,a.kt)("inlineCode",{parentName:"li"},"sessionErrorHandler"),", the function will be executed. After 1 minute, the page will forcefully redirect to the OOTB MicroStrategy Library login page.")),(0,a.kt)("p",null,"The differences from custom error handling:"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionErrorHandler")," created during dossier creation will not be deleted after dossier creation. It will continue to exist."),(0,a.kt)("p",null,"There can be only one ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionErrorHandler")," function at the same time, whether during dossier creation or after dossier creation. So if you want to add a new ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionErrorHandler"),", you should use ",(0,a.kt)("inlineCode",{parentName:"p"},"removeSessionErrorhandler()")," to remove the existing ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionErrorHandler")," first."),(0,a.kt)("h3",{id:"session-error-handling-during-dossier-creation"},"Session error handling during dossier creation"),(0,a.kt)("p",null,"The session error handler is executed when the error occurs and you can get details of the error in the ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionErrorHandler")," parameter."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"microstrategy.dossier.create({\n  url: url,\n  placeholder: container,\n  sessionErrorHandler: (errorObject) => {\n    // The handling logic of the user\n  },\n});\n")),(0,a.kt)("h3",{id:"session-error-handling-after-dossier-creation"},"Session error handling after dossier creation"),(0,a.kt)("p",null,"You can also provide a session error handler after the dossier is created. The session error handler is executed when the session expiration error occurs and you can get details of the error in the ",(0,a.kt)("inlineCode",{parentName:"p"},"sessionErrorHandler")," parameter."),(0,a.kt)("p",null,"If you do not configure this error handler and an error is encountered, the default pop-up mentioned at the beginning of this topic appears."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Class"),(0,a.kt)("th",{parentName:"tr",align:null},"Method"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"dossier"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"addSessionErrorHandler(handler)")),(0,a.kt)("td",{parentName:"tr",align:null},"addSessionErrorHandler(error): The session error handler that executes when the session expiration error occurs. It contains one parameter, error. The error object includes ",(0,a.kt)("inlineCode",{parentName:"td"},"title"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"message"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"desc"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"errorCode"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"iServerErrorCode"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"statusCode"),", and ",(0,a.kt)("inlineCode",{parentName:"td"},"ticketId"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"removeSessionErrorhandler()")),(0,a.kt)("td",{parentName:"tr",align:null},"Removes the session error handler.")))),(0,a.kt)("p",null,"Here is an example of how to set up error handling:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'microstrategy.dossier\n  .create({\n    placeholder: placeholderDiv,\n    url: "http://[host]:[port]/[Library]/app/[ProjectID]/[DossierID]",\n    sessionErrorHandler: function (error) {\n      console.log("catch session expiration error during creation: " + error.message);\n      //Do something to handle the session expiration error\n    },\n  })\n  .then(function (dossier) {\n    dossier.addSessionErrorHandler(function (error) {\n      console.log("catch session expiration error: " + error.message);\n      //Do something to handle the session expiration error\n    });\n  });\n')))}h.isMDXComponent=!0},3773:function(e,r,t){r.Z=t.p+"assets/images/library_server_error-d2752358ca517fcba1f0f4631a94dfba.png"}}]);