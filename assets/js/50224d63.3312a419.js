"use strict";(self.webpackChunkembedding_sdk_docs=self.webpackChunkembedding_sdk_docs||[]).push([[4002],{361:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});var o=n(5893),s=n(1151);const d={title:"Error handling",description:"MicroStrategy provides custom error handling in two stages, during dashboard creation and after dashboard creation."},i=void 0,t={id:"add-functionality/error-handling",title:"Error handling",description:"MicroStrategy provides custom error handling in two stages, during dashboard creation and after dashboard creation.",source:"@site/docs/add-functionality/error-handling.md",sourceDirName:"add-functionality",slug:"/add-functionality/error-handling",permalink:"/embedding-sdk-docs/add-functionality/error-handling",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/add-functionality/error-handling.md",tags:[],version:"current",lastUpdatedBy:"Aran0011",lastUpdatedAt:1710401361,formattedLastUpdatedAt:"Mar 14, 2024",frontMatter:{title:"Error handling",description:"MicroStrategy provides custom error handling in two stages, during dashboard creation and after dashboard creation."},sidebar:"tutorialSidebar",previous:{title:"Retrieve and apply filters",permalink:"/embedding-sdk-docs/add-functionality/filters"},next:{title:"Interact with panel stacks",permalink:"/embedding-sdk-docs/add-functionality/panel-stacks"}},a={},l=[{value:"Custom error handling",id:"custom-error-handling",level:2},{value:"Custom error handling during dashboard creation",id:"custom-error-handling-during-dashboard-creation",level:3},{value:"Custom error handling after dashboard creation",id:"custom-error-handling-after-dashboard-creation",level:3},{value:"The overall MicroStrategy Library error behavior in embed case",id:"the-overall-microstrategy-library-error-behavior-in-embed-case",level:3},{value:"Session error handling",id:"session-error-handling",level:2},{value:"Session error handling during dashboard creation",id:"session-error-handling-during-dashboard-creation",level:3},{value:"Session error handling after dashboard creation",id:"session-error-handling-after-dashboard-creation",level:3},{value:"Error handling way in Embedding SDK when checking input params",id:"error-handling-way-in-embedding-sdk-when-checking-input-params",level:2}];function c(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.p,{children:"By default, Library displays a pop-up dialog when an error occurs, such as when a dataset is not found."}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{alt:"library server error",src:n(4032).Z+"",width:"421",height:"328"})}),"\n",(0,o.jsx)(r.p,{children:"MicroStrategy provides custom error handling for these kinds of pop-up errors in two stages."}),"\n",(0,o.jsx)(r.p,{children:"MicroStrategy also provides session error handling for session errors in two stages. Because the handling method of the session error is different from other errors, we don't use the custom error handling in this case."}),"\n",(0,o.jsx)(r.h2,{id:"custom-error-handling",children:"Custom error handling"}),"\n",(0,o.jsx)(r.h3,{id:"custom-error-handling-during-dashboard-creation",children:"Custom error handling during dashboard creation"}),"\n",(0,o.jsx)(r.p,{children:"The error handler used during dashboard creation in\xa0microstrategy.dossier.create\xa0is implemented by default. The error handler is executed when the error occurs and you can get details of the error in the\xa0customErrorHandler\xa0parameter."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"microstrategy.dossier.create({\n  url,\n  placeholder: container,\n  errorHandler: customErrorHandler,\n});\n"})}),"\n",(0,o.jsx)(r.p,{children:"To disable the custom error handler during dashboard creation, set\xa0disableCustomErrorHandlerOnCreate\xa0to\xa0true. The default setting is\xa0false."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"microstrategy.dossier.create({\n  url,\n  placeholder: container,\n  disableCustomErrorHandlerOnCreate: true,\n});\n"})}),"\n",(0,o.jsx)(r.h3,{id:"custom-error-handling-after-dashboard-creation",children:"Custom error handling after dashboard creation"}),"\n",(0,o.jsxs)(r.p,{children:["You can also provide error handling after the dashboard is created. The error handler is executed when the error occurs and you can get details of the error in the\xa0",(0,o.jsx)(r.code,{children:"customErrorHandler"}),"\xa0parameter."]}),"\n",(0,o.jsx)(r.p,{children:"If you do not configure this error handler and an error is encountered, the default pop-up mentioned at the beginning of this topic appears."}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Class"}),(0,o.jsx)(r.th,{children:"Method"}),(0,o.jsx)(r.th,{children:"Description"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"dossier"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"addCustomErrorHandler(customErrorHandler, showErrorPopup)"})}),(0,o.jsxs)(r.td,{children:["customErrorHandler(error): The custom error handler that executes when the error occurs. It contains one parameter, error. The error object includes ",(0,o.jsx)(r.code,{children:"title"}),", ",(0,o.jsx)(r.code,{children:"message"}),", ",(0,o.jsx)(r.code,{children:"desc"}),", ",(0,o.jsx)(r.code,{children:"errorCode"}),", ",(0,o.jsx)(r.code,{children:"iServerErrorCode"}),", ",(0,o.jsx)(r.code,{children:"statusCode"}),", and ",(0,o.jsx)(r.code,{children:"ticketId"}),". ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"showErrorPopup: Set to ",(0,o.jsx)(r.code,{children:"false"})," to disable the error pop-up and execute the custom error handler you provide. ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"set to ",(0,o.jsx)(r.code,{children:"true"})," to display the error pop-up. When the user clicks OK, instead of going to Library, execute the custom error handler."]})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"removeCustomErrorHandler()"})}),(0,o.jsx)(r.td,{children:"Removes the custom error handler and uses the default error pop-up."})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{}),(0,o.jsx)(r.td,{}),(0,o.jsx)(r.td,{})]})]})]}),"\n",(0,o.jsx)(r.p,{children:"Here is an example of how to set up error handling:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'microstrategy.dossier\n  .create({\n    placeholder: placeholderDiv,\n    url: "http://[host]:[port]/[Library]/app/[ProjectID]/[DossierID]",\n    errorHandler(error) {\n      console.log(`catch error during creation: ${error.message}`);\n      // Do something to handle the error\n    },\n  })\n  .then((dossier) => {\n    dossier.addCustomErrorHandler((error) => {\n      console.log(`catch error: ${error.message}`);\n      // Do something to handle the error\n    });\n  });\n'})}),"\n",(0,o.jsx)(r.h3,{id:"the-overall-microstrategy-library-error-behavior-in-embed-case",children:"The overall MicroStrategy Library error behavior in embed case"}),"\n",(0,o.jsx)(r.p,{children:"The error generated by the embedded Library or dashboard page would output an error log in the browser console. Besides that,"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["If ",(0,o.jsx)(r.code,{children:"disableCustomErrorHandlerOnCreate"})," is set to ",(0,o.jsx)(r.code,{children:"true"})," in ",(0,o.jsx)(r.code,{children:"microstrategy.dossier.create"})," or ",(0,o.jsx)(r.code,{children:"microstrategy.embeddingContexts.embedLibraryPage"}),", the custom error handler couldn't be registered. The error would only be shown by a popup error dialog, which is the same as the OOTB MicroStrategy Library behavior;"]}),"\n",(0,o.jsxs)(r.li,{children:["If ",(0,o.jsx)(r.code,{children:"disableCustomErrorHandlerOnCreate"})," is not set or is ",(0,o.jsx)(r.code,{children:"false"}),":","\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["If a custom error handler is set by ",(0,o.jsx)(r.code,{children:"errorHandler"})," or ",(0,o.jsx)(r.code,{children:"addCustomErrorHandler(customErrorHandler, false)"}),", the error would only invoke the custom error handler and wouldn't popup a Library error dialog."]}),"\n",(0,o.jsxs)(r.li,{children:["If a custom error handler is set by ",(0,o.jsx)(r.code,{children:"addCustomErrorHandler(customErrorHandler, true)"}),", the error would first popup an error dialog, and when the user clicks the button on the error dialog, the custom error handler would be invoked."]}),"\n",(0,o.jsx)(r.li,{children:"If no custom error handler is set, the error would not popup an error dialog. There is no additional effect except the error log in the console."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"session-error-handling",children:"Session error handling"}),"\n",(0,o.jsx)(r.p,{children:"When the session expiration error occurs:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["If there is no ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"})," defined, the page will show the Library's logout page."]}),"\n",(0,o.jsxs)(r.li,{children:["If you define a ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"}),", the function will be executed. After 1 minute, the page will forcefully redirect to the OOTB MicroStrategy Library login page."]}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"The differences from custom error handling:"}),"\n",(0,o.jsxs)(r.p,{children:["The ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"})," created during dashboard creation will not be deleted after dashboard creation. It will continue to exist."]}),"\n",(0,o.jsxs)(r.p,{children:["There can be only one ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"})," function at the same time, whether during dashboard creation or after dashboard creation. So if you want to add a new ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"}),", you should use ",(0,o.jsx)(r.code,{children:"removeSessionErrorhandler()"})," to remove the existing ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"})," first."]}),"\n",(0,o.jsx)(r.h3,{id:"session-error-handling-during-dashboard-creation",children:"Session error handling during dashboard creation"}),"\n",(0,o.jsxs)(r.p,{children:["The session error handler is executed when the error occurs and you can get details of the error in the ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"})," parameter."]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"microstrategy.dossier.create({\n  url,\n  placeholder: container,\n  sessionErrorHandler: (errorObject) => {\n    // The handling logic of the user\n  },\n});\n"})}),"\n",(0,o.jsxs)(r.p,{children:["In the ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"}),", the API user is responsible for re-logging in, and refreshing the dashboard page. It could be done by triggering the original embedding logic, like calling ",(0,o.jsx)(r.code,{children:"microstrategy.dossier.create()"})," again. The different authentication methods could be seen on the page ",(0,o.jsx)(r.a,{href:"/embedding-sdk-docs/support-for-different-authentication-environments/",children:"Support for different authentication environments"}),"."]}),"\n",(0,o.jsx)(r.h3,{id:"session-error-handling-after-dashboard-creation",children:"Session error handling after dashboard creation"}),"\n",(0,o.jsxs)(r.p,{children:["You can also provide a session error handler after the dashboard is created. The session error handler is executed when the session expiration error occurs and you can get details of the error in the ",(0,o.jsx)(r.code,{children:"sessionErrorHandler"})," parameter."]}),"\n",(0,o.jsx)(r.p,{children:"If you do not configure this error handler and an error is encountered, the default pop-up mentioned at the beginning of this topic appears."}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Class"}),(0,o.jsx)(r.th,{children:"Method"}),(0,o.jsx)(r.th,{children:"Description"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"dossier"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"addSessionErrorHandler(handler)"})}),(0,o.jsxs)(r.td,{children:["addSessionErrorHandler(error): The session error handler that executes when the session expiration error occurs. It contains one parameter, error. The error object includes ",(0,o.jsx)(r.code,{children:"title"}),", ",(0,o.jsx)(r.code,{children:"message"}),", ",(0,o.jsx)(r.code,{children:"desc"}),", ",(0,o.jsx)(r.code,{children:"errorCode"}),", ",(0,o.jsx)(r.code,{children:"iServerErrorCode"}),", ",(0,o.jsx)(r.code,{children:"statusCode"}),", and ",(0,o.jsx)(r.code,{children:"ticketId"}),"."]})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"removeSessionErrorhandler()"})}),(0,o.jsx)(r.td,{children:"Removes the session error handler."})]})]})]}),"\n",(0,o.jsx)(r.p,{children:"Here is an example of how to set up error handling:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'microstrategy.dossier\n  .create({\n    placeholder: placeholderDiv,\n    url: "http://[host]:[port]/[Library]/app/[ProjectID]/[DossierID]",\n    sessionErrorHandler(error) {\n      console.log(`catch session expiration error during creation: ${error.message}`);\n      // Do something to handle the session expiration error\n    },\n  })\n  .then((dossier) => {\n    // if you want to add a new sessionErrorHandler(), you should remove the existing sessionErrorHandler() first\n    dossier.removeSessionErrorhandler();\n    dossier.addSessionErrorHandler((error) => {\n      console.log(`catch session expiration error: ${error.message}`);\n      // Do something to handle the session expiration error\n    });\n  });\n'})}),"\n",(0,o.jsx)(r.h2,{id:"error-handling-way-in-embedding-sdk-when-checking-input-params",children:"Error handling way in Embedding SDK when checking input params"}),"\n",(0,o.jsxs)(r.p,{children:["When using the Embedding SDK to embed a page by calling APIs, we will check the user input first. Different from other types of errors, for the input params error, under the default settings, we will directly pop up a pop-up window, so that users can get the most direct error feedback when developing code. It will throw an error after you click the OK button of this window, you can get it by adding a ",(0,o.jsx)(r.code,{children:"catch"})," outside the called API."]}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.img,{alt:"error popup window",src:n(8170).Z+"",width:"567",height:"211"})}),"\n",(0,o.jsxs)(r.p,{children:["If you don't want to see this pop-up window, you can close the pop-up window by adding ",(0,o.jsx)(r.code,{children:"disableErrorPopupWindow"})," parameter to the input. It will notify you of this error by throwing an error directly."]})]})}function h(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8170:(e,r,n)=>{n.d(r,{Z:()=>o});const o=n.p+"assets/images/error_popup_window-f9252ff4a606d2e78d2f13a6e12d1cde.png"},4032:(e,r,n)=>{n.d(r,{Z:()=>o});const o=n.p+"assets/images/library_server_error-d2752358ca517fcba1f0f4631a94dfba.png"},1151:(e,r,n)=>{n.d(r,{Z:()=>t,a:()=>i});var o=n(7294);const s={},d=o.createContext(s);function i(e){const r=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(d.Provider,{value:r},e.children)}}}]);