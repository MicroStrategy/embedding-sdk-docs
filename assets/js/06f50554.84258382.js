"use strict";(self.webpackChunkembedding_sdk_docs=self.webpackChunkembedding_sdk_docs||[]).push([[4854],{3473:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=n(5893),s=n(1151);const r={title:"Use guest authentication with multiple authentication modes enabled",description:"The example in this topic illustrates how to seamlessly display an embedded dossier using Guest authentication when multiple authentication modes are enabled."},o=void 0,a={id:"support-for-different-authentication-environments/multiple-modes",title:"Use guest authentication with multiple authentication modes enabled",description:"The example in this topic illustrates how to seamlessly display an embedded dossier using Guest authentication when multiple authentication modes are enabled.",source:"@site/docs/support-for-different-authentication-environments/multiple-modes.md",sourceDirName:"support-for-different-authentication-environments",slug:"/support-for-different-authentication-environments/multiple-modes",permalink:"/embedding-sdk-docs/support-for-different-authentication-environments/multiple-modes",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/support-for-different-authentication-environments/multiple-modes.md",tags:[],version:"current",lastUpdatedBy:"Aran0011",lastUpdatedAt:1705978927,formattedLastUpdatedAt:"Jan 23, 2024",frontMatter:{title:"Use guest authentication with multiple authentication modes enabled",description:"The example in this topic illustrates how to seamlessly display an embedded dossier using Guest authentication when multiple authentication modes are enabled."},sidebar:"tutorialSidebar",previous:{title:"Use guest authentication",permalink:"/embedding-sdk-docs/support-for-different-authentication-environments/guest-authentication-mode-only"},next:{title:"Use standard authentication",permalink:"/embedding-sdk-docs/support-for-different-authentication-environments/standard-authentication"}},d={},c=[{value:"Set up Library Server",id:"set-up-library-server",level:2},{value:"Configure the example",id:"configure-the-example",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"The example in this topic illustrates how to seamlessly display an embedded dossier using Guest authentication when multiple authentication modes are enabled."}),"\n",(0,i.jsx)(t.h2,{id:"set-up-library-server",children:"Set up Library Server"}),"\n",(0,i.jsx)(t.p,{children:"Enable Guest and other authentications in MicroStrategy Library Admin."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"MSTR Library Admin Guest Auth",src:n(6161).Z+"",width:"628",height:"546"})}),"\n",(0,i.jsx)(t.h2,{id:"configure-the-example",children:"Configure the example"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["A live example can be seen on ",(0,i.jsx)(t.a,{href:"https://microstrategy.github.io/embedding-sdk-samples/feature_showcase/1_2_Guest_With_MultiAuth.html",children:"GitHub"}),". Also check out ",(0,i.jsx)(t.a,{href:"https://microstrategy.github.io/embedding-sdk-samples/",children:"other examples"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<!doctype html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <title>GuestLoginExample</title>\n    <script\n      type="text/javascript"\n      src="https://demo.microstrategy.com/MicroStrategyLibraryInsights/javascript/embeddinglib.js"\n    ><\/script>\n  </head>\n  <body>\n    <div id="mydossier"></div>\n\n    <script type="text/javascript">\n      var baseURL = "https://demo.microstrategy.com/MicroStrategyLibraryInsights";\n      var projectId = "EC70648611E7A2F962E90080EFD58751";\n      var dossierId = "837B57D711E941BF000000806FA1298F";\n      function login() {\n        var options = {\n          method: "POST",\n          credentials: "include", // Including cookie\n          mode: "cors", // Setting as cors mode for cross origin\n          headers: { "Content-Type": "application/json" },\n          body: JSON.stringify({\n            loginMode: 8, // Login as guest user.\n          }),\n        };\n        return fetch(baseURL + "/api/auth/login", options)\n          .then(function (response) {\n            if (response.ok) {\n              return response.headers.get("x-mstr-authToken");\n            } else {\n              response.json().then(function (json) {\n                console.log(json);\n              });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n      }\n\n      document.addEventListener("DOMContentLoaded", function () {\n        var placeHolderDiv = document.getElementById("mydossier");\n        var dossierUrl = baseURL + "/app/" + projectId + "/" + dossierId;\n        microstrategy.dossier.create({\n          placeholder: placeHolderDiv,\n          url: dossierUrl,\n          enableCustomAuthentication: true,\n          enableResponsive: true,\n          customAuthenticationType: microstrategy.dossier.CustomAuthenticationType.AUTH_TOKEN,\n          getLoginToken: login,\n        });\n      });\n    <\/script>\n  </body>\n</html>\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"applicationType"})," must be unset or equal to ",(0,i.jsx)(t.code,{children:"35"}),". Because the implementation of Embedding SDK is based on login as a Library user, which uses the param of ",(0,i.jsx)(t.code,{children:"applicationType:35"}),"."]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"To use a dossier from your Library Server, make the following changes to the code:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Configure the path to the Embedding SDK javascript file, replacing\xa0",(0,i.jsx)(t.code,{children:"https://demo.microstrategy.com/MicroStrategyLibraryInsights"})," with your Library Server URL."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<script\n  type="text/javascript"\n  src="https://demo.microstrategy.com/MicroStrategyLibraryInsights/javascript/embeddinglib.js"\n><\/script>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The\xa0",(0,i.jsx)(t.code,{children:"embeddinglib.js"}),"\xa0file, which contains the Embedding SDK, is included in the\xa0",(0,i.jsx)(t.code,{children:"MicroStrategyLibrary"}),"\xa0web application."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Configure variables to set the values for the path to the MicroStrategy Library installation, the project ID, and the dossier ID."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Set the value of the\xa0",(0,i.jsx)(t.code,{children:"baseURL"}),"\xa0variable to the path to your MicroStrategy Library by replace\xa0",(0,i.jsx)(t.code,{children:"https://demo.microstrategy.com/MicroStrategyLibraryInsights"}),"\xa0with your Library Server URL."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'const baseURL = "https://demo.microstrategy.com/MicroStrategyLibraryInsights";\n'})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Set the value of the\xa0",(0,i.jsx)(t.code,{children:"projectId"}),"\xa0variable to the ID\xa0for the project containing the dossier you want to embed."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'const projectId = "EC70648611E7A2F962E90080EFD58751";\n'})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Set the value of the\xa0",(0,i.jsx)(t.code,{children:"dossierId"}),"\xa0variable to the ID\xa0of the dossier you want to embed."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'const dossierId = "837B57D711E941BF000000806FA1298F";\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:"You can obtain the project ID and dossier ID by running the dossier in MicroStrategy Library and copying the URL."})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Once you have configured the code, save your HTML file and open it in a browser. The embedded dossier is seamlessly displayed in the browser."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["If the dossier does not render on the page, you can use the browser developer tools to review any exceptions or errors being thrown. When you make an XHR\xa0request for\xa0",(0,i.jsx)(t.code,{children:"POST /auth/login"}),", you only need to wait until the response headers are returned. The expected status code will be 204 (Success no content). Review\xa0",(0,i.jsxs)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState",children:["the documentation on\xa0",(0,i.jsx)(t.code,{children:"XMLHTTPRequest.readyState"})]})," to understand what is necessary to obtain the request header."]})})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},6161:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/MstrLibraryAdmin_GuestAuth-170680210cd31e54c113bd06cd3fbe66.png"},1151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>o});var i=n(7294);const s={},r=i.createContext(s);function o(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);