"use strict";(self.webpackChunkembedding_sdk_docs=self.webpackChunkembedding_sdk_docs||[]).push([[899],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return u}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),d=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=d(t),u=a,v=p["".concat(s,".").concat(u)]||p[u]||m[u]||i;return t?r.createElement(v,l(l({ref:n},c),{},{components:t})):r.createElement(v,l({ref:n},c))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=p;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var d=2;d<i;d++)l[d]=t[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},7667:function(e,n,t){t.r(n),t.d(n,{assets:function(){return m},contentTitle:function(){return d},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var r,a=t(3117),i=t(102),l=(t(7294),t(3905)),o=["components"],s={title:"Add event handling",description:"Events allow the custom application page to listen to events from the embedded visualizations. You can listen to these events and provide event handler functions to respond to them. For example, you can add code to capture element selection events from embedded visualizations and apply them as a filter."},d=void 0,c={unversionedId:"native-embedding-architecture/event-handling",id:"native-embedding-architecture/event-handling",title:"Add event handling",description:"Events allow the custom application page to listen to events from the embedded visualizations. You can listen to these events and provide event handler functions to respond to them. For example, you can add code to capture element selection events from embedded visualizations and apply them as a filter.",source:"@site/docs/native-embedding-architecture/event-handling.md",sourceDirName:"native-embedding-architecture",slug:"/native-embedding-architecture/event-handling",permalink:"/embedding-sdk-docs/native-embedding-architecture/event-handling",draft:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/native-embedding-architecture/event-handling.md",tags:[],version:"current",lastUpdatedBy:"elinmstr",lastUpdatedAt:1684941589,formattedLastUpdatedAt:"May 24, 2023",frontMatter:{title:"Add event handling",description:"Events allow the custom application page to listen to events from the embedded visualizations. You can listen to these events and provide event handler functions to respond to them. For example, you can add code to capture element selection events from embedded visualizations and apply them as a filter."},sidebar:"tutorialSidebar",previous:{title:"Retrieve and apply filters",permalink:"/embedding-sdk-docs/native-embedding-architecture/apply-filter"},next:{title:"More examples",permalink:"/embedding-sdk-docs/samples"}},m={},p=[{value:"Event handlers",id:"event-handlers",level:2},{value:"<code>registerEventHandler(eventName, handler)</code>",id:"registereventhandlereventname-handler",level:3},{value:"Class",id:"class",level:4},{value:"Description",id:"description",level:4},{value:"Error handlers",id:"error-handlers",level:2},{value:"<code>registerErrorHandler(handler)</code>",id:"registererrorhandlerhandler",level:3},{value:"Class",id:"class-1",level:4},{value:"Description",id:"description-1",level:4},{value:"Events",id:"events",level:2},{value:"<code>onVizElementSelectionChanged</code>",id:"onvizelementselectionchanged",level:3},{value:"Event name",id:"event-name",level:4},{value:"Description",id:"description-2",level:4},{value:"Content",id:"content",level:4},{value:"Code example",id:"code-example",level:4},{value:"Content example",id:"content-example",level:4}],u=(r="Available",function(e){return console.warn("Component "+r+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.kt)("div",e)}),v={toc:p};function h(e){var n=e.components,t=(0,i.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},v,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)(u,{since:"2021 Update 9 (May 2023)",mdxType:"Available"}),(0,l.kt)("p",null,"Event handling allows a custom application page to listen to events from embedded visualizations. You can listen to these events and handle the events in the handler functions. For example, you can add code to capture element selection events from embedded visualizations and apply them as a filter."),(0,l.kt)("p",null,"Let's say you already have ",(0,l.kt)("inlineCode",{parentName:"p"},"MstrEnvironment")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"MstrDossier")," objects. Then you can use ",(0,l.kt)("inlineCode",{parentName:"p"},"MstrDossier.registerEventHandler")," to register handlers for events. You can also use ",(0,l.kt)("inlineCode",{parentName:"p"},"MstrDossier.registerErrorHandler")," to register handlers for errors that occur during graphic manipulations of embedded visualizations."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'try {\n  const mstrEnvironment = await microstrategy.embeddingComponent.environments.create({\n    serverUrl: "https://demo.microstrategy.com/MicroStrategyLibrary",\n    getAuthToken: () => {\n      // Logic similar to the existing Native Embedding SDK, but only standard auth login is allowed\n    },\n  });\n  const mstrDossier = await mstrEnvironment.loadDossier({\n    projectId: "B19DEDCC11D4E0EFC000EB9495D0F44F",\n    objectId: "D9AB379D11EC92C1D9DC0080EFD415BB",\n  });\n  // register event handler and error handler\n  mstrDossier.registerEventHandler(eventName, (event) => {\n    // Your own event handling code\n  });\n  mstrDossier.registerErrorHandler((error) => {\n    // Your own error handling code\n  });\n  // Your custom logic\n} catch (error) {\n  // Your own error handling code\n}\n')),(0,l.kt)("h2",{id:"event-handlers"},"Event handlers"),(0,l.kt)("p",null,"There is a method for registering an event handler."),(0,l.kt)("h3",{id:"registereventhandlereventname-handler"},(0,l.kt)("inlineCode",{parentName:"h3"},"registerEventHandler(eventName, handler)")),(0,l.kt)("h4",{id:"class"},"Class"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"MstrDossier")),(0,l.kt)("h4",{id:"description"},"Description"),(0,l.kt)("p",null,"Register the ",(0,l.kt)("inlineCode",{parentName:"p"},"handler")," event handler on ",(0,l.kt)("inlineCode",{parentName:"p"},"eventName"),"."),(0,l.kt)("h2",{id:"error-handlers"},"Error handlers"),(0,l.kt)("p",null,"There is a method for registering an error handler."),(0,l.kt)("h3",{id:"registererrorhandlerhandler"},(0,l.kt)("inlineCode",{parentName:"h3"},"registerErrorHandler(handler)")),(0,l.kt)("h4",{id:"class-1"},"Class"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"MstrDossier")),(0,l.kt)("h4",{id:"description-1"},"Description"),(0,l.kt)("p",null,"Register the ",(0,l.kt)("inlineCode",{parentName:"p"},"handler")," error handler to handle errors during graphic manipulations of embedded visualizations."),(0,l.kt)("h2",{id:"events"},"Events"),(0,l.kt)("p",null,"Each supported event is described in the table below."),(0,l.kt)("h3",{id:"onvizelementselectionchanged"},(0,l.kt)("inlineCode",{parentName:"h3"},"onVizElementSelectionChanged")),(0,l.kt)("h4",{id:"event-name"},"Event name"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"onVizElementSelectionChanged")),(0,l.kt)("h4",{id:"description-2"},"Description"),(0,l.kt)("p",null,"Raised when elements in visualizations are selected or unselected in graphics."),(0,l.kt)("h4",{id:"content"},"Content"),(0,l.kt)("p",null,"Attribute element list or metric element list for the currently selected elements in the visualization."),(0,l.kt)("h4",{id:"code-example"},"Code example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'mstrDossier.registerEventHandler(\n  "onVizElementSelectionChanged",\n  onVizElementSelectionChangedHandler\n);\n')),(0,l.kt)("h4",{id:"content-example"},"Content example"),(0,l.kt)("p",null,"The event data passed to the registered event handler is as follows:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"attribute element selection"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example for attribute element selection"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "visualizationKey": "K52",\n  "currentSelection": {\n    "selectionStatus": "included",\n    "type": "attribute_element_list",\n    "selections": [\n      {\n        "attribute": {\n          "id": "8D679D4511D3E4981000E787EC6DE8A4",\n          "name": "Month of Year"\n        },\n        "elements": [\n          {\n            "id": "h6;8D679D4511D3E4981000E787EC6DE8A4",\n            "name": "June"\n          },\n          {\n            "id": "h4;8D679D4511D3E4981000E787EC6DE8A4",\n            "name": "April"\n          }\n        ]\n      },\n      {\n        "attribute": {\n          "id": "8D679D5111D3E4981000E787EC6DE8A4",\n          "name": "Year"\n        },\n        "elements": [\n          {\n            "id": "h2014;8D679D5111D3E4981000E787EC6DE8A4",\n            "name": "2014"\n          }\n        ]\n      }\n    ]\n  }\n}\n')))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"metric element selection"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example for metric element selection"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "key": "K52",\n  "currentSelection": {\n    "selectionStatus": "included",\n    "type": "metric_element_list",\n    "attributes": [\n      {\n        "id": "8D679D4511D3E4981000E787EC6DE8A4",\n        "name": "Month of Year"\n      },\n      {\n        "id": "8D679D5111D3E4981000E787EC6DE8A4",\n        "name": "Year"\n      }\n    ],\n    "selections": [\n      [\n        {\n          "id": "h6;8D679D4511D3E4981000E787EC6DE8A4",\n          "name": "June"\n        },\n        {\n          "id": "h2014;8D679D5111D3E4981000E787EC6DE8A4",\n          "name": "2014"\n        }\n      ],\n      [\n        {\n          "id": "h9;8D679D4511D3E4981000E787EC6DE8A4",\n          "name": "September"\n        },\n        {\n          "id": "h2014;8D679D5111D3E4981000E787EC6DE8A4",\n          "name": "2014"\n        }\n      ]\n    ]\n  }\n}\n')))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"map layer element selection"),(0,l.kt)("p",{parentName:"li"},"For map visualizations, each layer has its corresponding attribute element selection object or metric element selection object."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example for map layer element selection"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "visualizationKey": "K52",\n  "currentSelection": {\n    "type": "map_layers_element",\n    "layers": [\n      {\n        "key": "K52",\n        "name": "Layer 1",\n        "currentSelection": {\n          "selectionStatus": "included",\n          "type": "metric_element_list",\n          "attributes": [\n            {\n              "id": "CE7009ED794959855954969DBC62CEF2",\n              "name": "latitude ID"\n            },\n            {\n              "id": "A3AD18663D4E7A5AC945BCA1D9C66451",\n              "name": "longitude ID"\n            }\n          ],\n          "selections": [\n            [\n              {\n                "id": "h55.3675;CE7009ED794959855954969DBC62CEF2",\n                "name": "55.3675"\n              },\n              {\n                "id": "h-154.0944;A3AD18663D4E7A5AC945BCA1D9C66451",\n                "name": "-154.0944"\n              }\n            ]\n          ]\n        }\n      },\n      {\n        "key": "W67",\n        "name": "Layer 2",\n        "currentSelection": {\n          "selectionStatus": "unfiltered"\n        }\n      },\n      {\n        "key": "W76",\n        "name": "Layer 3",\n        "currentSelection": {\n          "selectionStatus": "unfiltered"\n        }\n      }\n    ]\n  }\n}\n'))))))}h.isMDXComponent=!0}}]);