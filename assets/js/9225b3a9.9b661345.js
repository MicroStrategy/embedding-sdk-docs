"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[446],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return u}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(r),u=o,g=d["".concat(s,".").concat(u)]||d[u]||m[u]||i;return r?n.createElement(g,a(a({ref:t},c),{},{components:r})):n.createElement(g,a({ref:t},c))}));function u(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var p=2;p<i;p++)a[p]=r[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5142:function(e,t,r){r.r(t),r.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return m}});var n=r(3117),o=r(102),i=(r(7294),r(3905)),a=["components"],l={title:"Configure Library Server for embedding",description:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please enable Cross-Origin Resource Sharing (CORS) and allow SameSite cookies."},s=void 0,p={unversionedId:"config",id:"config",title:"Configure Library Server for embedding",description:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please enable Cross-Origin Resource Sharing (CORS) and allow SameSite cookies.",source:"@site/docs/config.md",sourceDirName:".",slug:"/config",permalink:"/embedding-sdk-docs/config",draft:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/config.md",tags:[],version:"current",lastUpdatedBy:"elinmstr",lastUpdatedAt:1677601456,formattedLastUpdatedAt:"Feb 28, 2023",frontMatter:{title:"Configure Library Server for embedding",description:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please enable Cross-Origin Resource Sharing (CORS) and allow SameSite cookies."},sidebar:"tutorialSidebar",previous:{title:"What's new in the Embedding SDK",permalink:"/embedding-sdk-docs/whats-new-in-the-embedding-sdk"},next:{title:"Embedding SDK Playground",permalink:"/embedding-sdk-docs/playground"}},c={},m=[{value:"Enable Cross-Origin Resource Sharing (CORS)",id:"enable-cross-origin-resource-sharing-cors",level:2},{value:"Allow SameSite cookies",id:"allow-samesite-cookies",level:2},{value:"For MicroStrategy 2021 Update 6 or after",id:"for-microstrategy-2021-update-6-or-after",level:3},{value:"For MicroStrategy 2021 Update 5 or before",id:"for-microstrategy-2021-update-5-or-before",level:3}],d={toc:m};function u(e){var t=e.components,l=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,n.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please also meet the following requirements."),(0,i.kt)("h2",{id:"enable-cross-origin-resource-sharing-cors"},"Enable Cross-Origin Resource Sharing (CORS)"),(0,i.kt)("p",null,"Cross-Origin Resource Sharing (CORS) provides a way for a web application running in one origin (domain, protocol, and port) to access selected resources from a server in a different origin. A cross-origin HTTP request uses additional HTTP headers to tell the browser to let the web application share resources. For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts. This means that when a web application requests HTTP resources from a different origin, the response from the other origin must include the right CORS headers."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Chrome Web Browser version 80 and above introduces new changes which may impact embedding. For more information, see\xa0",(0,i.kt)("a",{parentName:"p",href:"https://community.microstrategy.com/s/article/Chrome-v80-Cookie-Behavior-and-the-impact-on-MicroStrategy-Deployments"},"KB484005: Chrome v80 Cookie Behavior and the Impact on MicroStrategy Deployments"),".")),(0,i.kt)("p",null,"To enable CORS for the REST Server:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the Library Admin page. Your URL\xa0should be similar to the following:"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"https://<host_name>:<port>/MicroStrategyLibrary/admin"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to\xa0",(0,i.kt)("strong",{parentName:"p"},"Library Server -> Security Settings"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose the appropriate setting for\xa0",(0,i.kt)("strong",{parentName:"p"},"Allow Library embedding in other sites"),"\xa0to reconfigure CORS."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Library Admin CORS Setting",src:r(6794).Z,width:"800",height:"464"})))),(0,i.kt)("p",null,"Using the Library Admin page is the easiest way to enable CORS for the REST\xa0Server, but you can also configure CORS manually."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"MicroStrategyLibrary/WEB-INF/classes/config/configOverride.properties"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Edit the\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"configOverride.properties"),"\xa0file in a text editor.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add the following lines, or replace them if already present:"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"auth.cors.origins=http://example.com:port")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"security.allowedOrigins=http://example.com:port"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Restart your MicroStrategy Library web application hosted on the application server."))),(0,i.kt)("p",null,"Alternatively, you can also configure this in MicroStrategy Workstation by ",(0,i.kt)("a",{parentName:"p",href:"https://www2.microstrategy.com/producthelp/Current/Workstation/WebHelp/Lang_1033/Content/library_admin_settings.htm#View"},"editing the properties of the environment"),"."),(0,i.kt)("h2",{id:"allow-samesite-cookies"},"Allow SameSite cookies"),(0,i.kt)("p",null,"Google Chrome (version 80+) and Microsoft Edge (version 86+) introduced new changes that may impact embedding."),(0,i.kt)("p",null,"For Embedding SDK to function as expected in a 3rd-party context, it is required to explicitly label session cookies with ",(0,i.kt)("inlineCode",{parentName:"p"},"SameSite=None; Secure"),"."),(0,i.kt)("h3",{id:"for-microstrategy-2021-update-6-or-after"},"For MicroStrategy 2021 Update 6 or after"),(0,i.kt)("p",null,"Starting in MicroStrategy 2021 Update 6, you can manage SameSite Cookies for Library in Workstation, by following the steps in ",(0,i.kt)("a",{parentName:"p",href:"https://www2.microstrategy.com/producthelp/Current/Workstation/WebHelp/Lang_1033/Content/config_samesite_cookies.htm"},"this document"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"SameSite Cookie",src:r(2913).Z,width:"1868",height:"1022"})),(0,i.kt)("h3",{id:"for-microstrategy-2021-update-5-or-before"},"For MicroStrategy 2021 Update 5 or before"),(0,i.kt)("p",null,"If you are using MicroStrategy 2021 Update 5 or before, make the following changes on your server instance."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If ",(0,i.kt)("inlineCode",{parentName:"p"},"context.xml")," doesn't already exist in the following folder location, create it: ",(0,i.kt)("inlineCode",{parentName:"p"},"[Tomcat Folder]\\webapps\\MicroStrategyLibrary\\META-INF\\context.xml"),". Add the following to ",(0,i.kt)("inlineCode",{parentName:"p"},"context.xml"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<Context>\n   <CookieProcessor sameSiteCookies="None"/>\n</Context>\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In ",(0,i.kt)("inlineCode",{parentName:"p"},"[Tomcat Folder]\\webapps\\MicroStrategyLibrary\\WEB-INF\\web.xml"),", change ",(0,i.kt)("inlineCode",{parentName:"p"},"sameSite")," param-value blow to ",(0,i.kt)("inlineCode",{parentName:"p"},"NONE")," to permit embedding."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- ... --\x3e\n<filter>\n<filter-name>cookieProcessorFilter</filter-name>\n<filter-class>com.microstrategy.web.filter.CookieProcessorFilter</filter-class>\n<init-param>\n<param-name>sameSite</param-name>\n<param-value>NONE</param-value>\n</init-param>\n</filter>\n\x3c!-- ... --\x3e\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Ensure your Tomcat is configured to support HTTPS.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Restart Tomcat."))),(0,i.kt)("p",null,"For more information, see ",(0,i.kt)("a",{parentName:"p",href:"https://community.microstrategy.com/s/article/Chrome-v80-Cookie-Behavior-and-the-impact-on-MicroStrategy-Deployments?language=en_US"},"Chrome v80 Cookie Behavior and the Impact on MicroStrategy Deployments"),"."))}u.isMDXComponent=!0},6794:function(e,t,r){t.Z=r.p+"assets/images/LibraryAdmin_CORSsetting-3639c5dcf59048d1e393e62e30b664c6.png"},2913:function(e,t,r){t.Z=r.p+"assets/images/SameSiteCookie-0c732b3aa02b21ddfa0053f97e462f13.png"}}]);