"use strict";(self.webpackChunkembedding_sdk_docs=self.webpackChunkembedding_sdk_docs||[]).push([[4446],{1896:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=n(5893),o=n(1151);const t={title:"Configure Library Server for embedding",description:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please enable Cross-Origin Resource Sharing (CORS) and allow SameSite cookies."},s=void 0,a={id:"config",title:"Configure Library Server for embedding",description:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please enable Cross-Origin Resource Sharing (CORS) and allow SameSite cookies.",source:"@site/docs/config.md",sourceDirName:".",slug:"/config",permalink:"/embedding-sdk-docs/config",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/embedding-sdk-docs/tree/public/docs/config.md",tags:[],version:"current",lastUpdatedBy:"Aran0011",lastUpdatedAt:1705978927,formattedLastUpdatedAt:"Jan 23, 2024",frontMatter:{title:"Configure Library Server for embedding",description:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please enable Cross-Origin Resource Sharing (CORS) and allow SameSite cookies."},sidebar:"tutorialSidebar",previous:{title:"What's new in the Embedding SDK",permalink:"/embedding-sdk-docs/whats-new-in-the-embedding-sdk"},next:{title:"Embedding SDK Playground",permalink:"/embedding-sdk-docs/playground"}},c={},d=[{value:"Enable Cross-Origin Resource Sharing (CORS)",id:"enable-cross-origin-resource-sharing-cors",level:2},{value:"Allow SameSite cookies",id:"allow-samesite-cookies",level:2},{value:"For MicroStrategy 2021 Update 6 or after",id:"for-microstrategy-2021-update-6-or-after",level:3},{value:"For MicroStrategy 2021 Update 5 or before",id:"for-microstrategy-2021-update-5-or-before",level:3}];function l(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:"If you plan to use Embedding SDK on a different domain from your MicroStrategy environment, please also meet the following requirements."}),"\n",(0,i.jsx)(r.h2,{id:"enable-cross-origin-resource-sharing-cors",children:"Enable Cross-Origin Resource Sharing (CORS)"}),"\n",(0,i.jsx)(r.p,{children:"Cross-Origin Resource Sharing (CORS) provides a way for a web application running in one origin (domain, protocol, and port) to access selected resources from a server in a different origin. A cross-origin HTTP request uses additional HTTP headers to tell the browser to let the web application share resources. For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts. This means that when a web application requests HTTP resources from a different origin, the response from the other origin must include the right CORS headers."}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsxs)(r.p,{children:["Chrome Web Browser version 80 and above introduces new changes which may impact embedding. For more information, see\xa0",(0,i.jsx)(r.a,{href:"https://community.microstrategy.com/s/article/Chrome-v80-Cookie-Behavior-and-the-impact-on-MicroStrategy-Deployments",children:"KB484005: Chrome v80 Cookie Behavior and the Impact on MicroStrategy Deployments"}),"."]})}),"\n",(0,i.jsx)(r.p,{children:"To enable CORS for the REST Server:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Open the Library Admin page. Your URL\xa0should be similar to the following:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"https://<host_name>:<port>/MicroStrategyLibrary/admin"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["Navigate to\xa0",(0,i.jsx)(r.strong,{children:"Library Server -> Security Settings"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["Choose the appropriate setting for\xa0",(0,i.jsx)(r.strong,{children:"Allow Library embedding in other sites"}),"\xa0to reconfigure CORS."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"Library Admin CORS Setting",src:n(6794).Z+"",width:"800",height:"464"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Using the Library Admin page is the easiest way to enable CORS for the REST\xa0Server, but you can also configure CORS manually."}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["Navigate to\xa0",(0,i.jsx)(r.code,{children:"MicroStrategyLibrary/WEB-INF/classes/config/configOverride.properties"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["Edit the\xa0",(0,i.jsx)(r.code,{children:"configOverride.properties"}),"\xa0file in a text editor."]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Add the following lines, or replace them if already present:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"auth.cors.origins=http://example.com:port"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"security.allowedOrigins=http://example.com:port"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Restart your MicroStrategy Library web application hosted on the application server."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Alternatively, you can also configure this in MicroStrategy Workstation by ",(0,i.jsx)(r.a,{href:"https://www2.microstrategy.com/producthelp/Current/Workstation/WebHelp/Lang_1033/Content/library_admin_settings.htm#View",children:"editing the properties of the environment"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"allow-samesite-cookies",children:"Allow SameSite cookies"}),"\n",(0,i.jsx)(r.p,{children:"Google Chrome (version 80+) and Microsoft Edge (version 86+) introduced new changes that may impact embedding."}),"\n",(0,i.jsxs)(r.p,{children:["For Embedding SDK to function as expected in a 3rd-party context, it is required to explicitly label session cookies with ",(0,i.jsx)(r.code,{children:"SameSite=None; Secure"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"for-microstrategy-2021-update-6-or-after",children:"For MicroStrategy 2021 Update 6 or after"}),"\n",(0,i.jsxs)(r.p,{children:["Starting in MicroStrategy 2021 Update 6, you can manage SameSite Cookies for Library in Workstation, by following the steps in ",(0,i.jsx)(r.a,{href:"https://www2.microstrategy.com/producthelp/Current/Workstation/WebHelp/Lang_1033/Content/config_samesite_cookies.htm",children:"this document"}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"SameSite Cookie",src:n(2913).Z+"",width:"1868",height:"1022"})}),"\n",(0,i.jsx)(r.h3,{id:"for-microstrategy-2021-update-5-or-before",children:"For MicroStrategy 2021 Update 5 or before"}),"\n",(0,i.jsx)(r.p,{children:"If you are using MicroStrategy 2021 Update 5 or before, make the following changes on your server instance."}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["If ",(0,i.jsx)(r.code,{children:"context.xml"})," doesn't already exist in the following folder location, create it: ",(0,i.jsx)(r.code,{children:"[Tomcat Folder]\\webapps\\MicroStrategyLibrary\\META-INF\\context.xml"}),". Add the following to ",(0,i.jsx)(r.code,{children:"context.xml"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-xml",children:'<Context>\n   <CookieProcessor sameSiteCookies="None"/>\n</Context>\n'})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["In ",(0,i.jsx)(r.code,{children:"[Tomcat Folder]\\webapps\\MicroStrategyLibrary\\WEB-INF\\web.xml"}),", change ",(0,i.jsx)(r.code,{children:"sameSite"})," param-value blow to ",(0,i.jsx)(r.code,{children:"NONE"})," to permit embedding."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-xml",children:"\x3c!-- ... --\x3e\n<filter>\n<filter-name>cookieProcessorFilter</filter-name>\n<filter-class>com.microstrategy.web.filter.CookieProcessorFilter</filter-class>\n<init-param>\n<param-name>sameSite</param-name>\n<param-value>NONE</param-value>\n</init-param>\n</filter>\n\x3c!-- ... --\x3e\n"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Ensure your Tomcat is configured to support HTTPS."}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Restart Tomcat."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["For more information, see ",(0,i.jsx)(r.a,{href:"https://community.microstrategy.com/s/article/Chrome-v80-Cookie-Behavior-and-the-impact-on-MicroStrategy-Deployments?language=en_US",children:"Chrome v80 Cookie Behavior and the Impact on MicroStrategy Deployments"}),"."]})]})}function h(e={}){const{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},6794:(e,r,n)=>{n.d(r,{Z:()=>i});const i=n.p+"assets/images/LibraryAdmin_CORSsetting-3639c5dcf59048d1e393e62e30b664c6.png"},2913:(e,r,n)=>{n.d(r,{Z:()=>i});const i=n.p+"assets/images/SameSiteCookie-0c732b3aa02b21ddfa0053f97e462f13.png"},1151:(e,r,n)=>{n.d(r,{Z:()=>a,a:()=>s});var i=n(7294);const o={},t=i.createContext(o);function s(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);